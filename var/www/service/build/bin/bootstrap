#!/bin/bash
set -eu

# - - - - - - - - - - - - - - - - - -
# Service Bootstrap
#
# Initializes a service with latest
#
# - - - - - - - - - - - - - - - - - -

CMD_COMPOSER=composer --quiet --no-ansi --no-interaction
CMD_ARTISAN=php artisan --no-ansi

# REQ.
cd /var/www/service
if [ ! -e /var/www/service ]; then
    $CMD_COMPOSER global require laravel/installer
    ~/.composer/vendor/bin/laravel new service
fi

$CMD_ARTISAN config:clear
$CMD_ARTISAN cache:clear

# Install
cd /var/www/service 
$CMD_COMPOSER require laravel/jetstream
$CMD_ARTISAN jetstream:install inertia --teams

# Mig
$CMD_ARTISAN migrate

# Init
npm install && npm run dev
